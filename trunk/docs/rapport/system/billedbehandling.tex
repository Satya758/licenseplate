\label{sec_billed}

\subsection{Lokalisering af nummerplader}
HVOR KOMMER METODERNE FRA?
INTRO TIL VALG AF METODER

!Lav om så eksempelbilledet kun vises en gang, og man forstår at det er dette billede alle eksempler bruger so inddata.

%I dette afsnit beskrives de tre første elementer af vores system: identificering af nummerpladen i billedet, rotation af nummerpladen samt segmentering af tegn i nummerpladen.


%\subsection{Identifikation af nummerplader}
I arbejdet med at lokalisere nummerplader, har vi valgt at arbejde med flere forskellige metoder. Det er vores tanke, at vi ved at bruge metoderne sammen kan opnå et bedre resultat end ved at bruge metoderne hver for sig. F.eks. vil et område som udpeges som værende en nummerplade af flere metoder have en høj grad af troværdighed mens det i en situation hvor metoderne alle udpeger forskellige områder vil være meget usikkert hvor nummerpladen befinder sig. I dette afsnit beskriver vi de forskellige metoder vi benytter os af, samt hvordan disse fungerer som et samlet system til lokalisering af af nummerplader. 

%\subsubsection*{Interesseområder}
Metoderne i dette afsnit, fungerer alle på den måde at de returnerer et binært\footnote{Et billede der kun består af farverne hvid og sort} billede hvor områder der opfattes som interessante, det vil sige potentielle nummerplader, er markeret med farven hvid. I den bedst tænkelige, og meget urealistske, situation er nummerpladeområdet markeret med hvidt mens resten af billedet er sort som vist på figur \vref{fig:binary_ideal}. I den realistiske situation er der mange interesseområder markeret i det binære billede som det kan ses på figur \vref{fig:binary_real}. Vi kalder disse områder for kandidater, og beskriver hvordan vi vælger mellem dem i det senere afsnit \textbf{Analyse af kandidater} der begynder på side \pageref{sec:kandidater}.

SKAL DER REFERES TIL BILLEDET AF BILEN?

FJERNET FRAMEBOX - SKAL IND IGEN

\begin{figure}[htp]
\centering
%\framebox{
\includegraphics[width=5cm]{illu/B_XC33139.jpg}
%}
\caption{Et billede hvor vi ønsker at lokalisere nummerpladen}
\label{fig:input_billede}
\end{figure}



\begin{figure}[htp]
\centering
\includegraphics[width=5cm]{system/illu/binary_ideal.png} 
\caption{Det bedst tænkelige billede af nummerpladekandidater i billedet på figur \ref{fig:input_billede}}
\label{fig:binary_ideal}
\end{figure}

SKAL DER VÆRE ET BILLEDE DER VISER SITUATIONEN FØR DER SORTERES FRA?

\begin{figure}[htp]
\centering
\includegraphics[width=5cm]{system/illu/binary_real.png} 
\caption{Et mere realistisk eksempel på nummerpladekandidater for billedet på figur \ref{fig:input_billede}}
\label{fig:binary_real}
\end{figure}



\subsubsection{Metode: Områder domineret af lyse gråtoner}
SØREN: NÆPPE REALISTISK METODE

I denne metode forsøger vi at finde nummerpladen i et billede ved at lede efter områder der domineres af lyse gråtoner i et farvebillede. Vi håber at en af de markerede interesseområder vil være nummerpladen da dens baggrund består af lyse gråtoner. I et farvebillede vil det sige, at området vil være domineret af pixels hvor de tre farvekanaler, rød, grøn og blå har intensitetsværdier der ligger forholdsvis tæt på hinanden. F.eks. vil en helt rød pixel have værdien 256 i den røde farvekanal mens værdierne i den grønne og blå farvekanal være 0. I dette tilfælde er der altså tale om en meget skæv fordeling af intensistestvrædierne på de tre farvekanaler. Et eksempel på en jævn fordeling af intensitetsværdierne er en middelgrå pixel der vil have værdien 128 i alle tre farvekanaler.

For at markere interesseområder udregner vi en gennemsnitsværdi for hver pixel i farvebilledet ved at summere værdierne for hver af de tre farvekanaler og dividere med tre. Hvis alle tre kanaler har en værdi der ligger tæt \footnote{Et parameter i programmet} på middelværdien og denne samtidig er høj, det vil sige lys, \footnote{Et parameter i programmet} farves den indeværende pixel, i det binære billede der viser interesseområderne, hvid. Figur \ref{fig:binary_DetectSameness} viser et eksempel på interesemetoder markeret med denne metode. Denne metode er implementeret i funktionen \textit{DetectSameness} hvis kildekode findes i afsnit \vref{code:DetectSameness}. 


Hvis $X$ er en nedre grænseværdi for de intensiteter vi opfatter som lyse. $Y$ er en værdi der bestemmer hvor stor afstand der må være mellem intensiteterne i de tre farvekanaler og $I_{ij}$ er pixels i et farvebillede hvis nummerplade vi ønsker at finde, er pixels i det binære billede $B_{ij}$ defineret som:
\begin{equation}
B_{ij} = 
\begin{Bmatrix}
1 & \text{Hvis } (R(I_{ij})+G(I_{ij})+B(I_{ij})/3) > X\\
 & R(I_{ij}) > mean - Y & < Y + mean\\
0 & \delta
\end{Bmatrix}
\end{equation}

HVORDAN SKRIVES DETTE I LATEX?



\begin{comment}


% Et forsøg på at skrive det anderledes. Ikke færdigt..

For hver pixel $x$ i et farvebillede, hvor vi ønsker at finde nummerpladen, udregnes værdien for samme pixel $x_{b}$ i det binære billede således:

\begin{equation}
x_{b} = 
\begin{Bmatrix}
1 & \text{Hvis } ((R(x)+G(x)+B(x))/3) > L\\
 & R(x) > mean - D & < D + mean\\
0 & \delta
\end{Bmatrix}
\end{equation}


hvor $R(x)$, $G(x)$ og $B(x)$ er intensitetsværdierne for henholdsvis den røde, den grønne og den blå farvekanal i pixelen $x$, mens $L$ er den nedre grænse for middelværdien og $D$ er den maksimale afstand fra værdien i de tre farvekanaler til middelværdien.

\end{comment}


\begin{figure}[htbp]
  \centering
  \begin{minipage}[b]{5 cm}
    \framebox{\includegraphics[width=4cm]{illu/B_XC33139.jpg}}
  \end{minipage}
  \begin{minipage}[b]{5 cm}
    \framebox{\includegraphics[width=4cm]{system/illu/binary_DetectSameness.png}}  
  \end{minipage}
  \caption{Det binære billede til højre viser viser de interesseområder metoden markerer når inddate er billedet til venstre}
  \label{fig:binary_DetectSameness}
\end{figure}



\subsubsection{Metode: Områder med høj kontrast}
REFERER TIL ARTIKEL MED DEN METODE

Vi forventer at et område med en nummerplade vil indeholde områder med høj kontrast på grund af de mange skarpe kanter mellem de mørke tegn og den lyse baggrund. Ved at lave billedet om til gråtoner og derefter opfatte intensiteterne i billedet som højder i et landskab kan vi beskrive hældninger i landskabet med såkaldte gradienter. Gradienter beskriver hældningen i en pixel som en todimensionel vektor. Et område med en blød overgang i intensitet fra sort til hvid, har korte gradienter der alle peger den samme vej for alle pixels i området, mens et område med en brat overgang fra sort til hvid (høj kontrast) vil resultere i lange gradienter der peger mod det sorte område. Figur \vref{fig:gradienter} viser to simple eksempler på intensitetslandskaber og de tilhørende gradienter.



% Illustration af gradienter
%\begin{comment}
\begin{figure}[htp]
\centering
\includegraphics[width=10cm]{system/illu/gradienter.png} 
\caption{Illustration af konceptet gradienter. Pilene viser hældninger i intensitetslandskabet. Da der er tale om glidende overgange fra hvid til sort, har pilene alle samme længde. Illustrationen er fra \cite{wiki_gradienter}.}.
\label{fig:gradienter}
\end{figure}
%\end{comment}

SKAL DER VÆRE ET BILLEDE DER VISER SITUATIONEN FØRE SORTERING?

Efter at have udregnet billedets gradienter som vist på figur \vref{fig:DetectContrastAvg-grads}, kan vi udregne deres vinkler. Vi vælger at lave et nyt billede der viser gradienter med en vinkel på mellem 0 og 30 mellem sig selv og en vandret linie. Et eksempel på et sådant billede er vist på figur \vref{fig:DetectContrastAvg-hgrads}. HREF HER??? Grunden til at vi kun tager disse "liggende" gradienter med, er at vi på den måde undgår at markere evt. vandrette kanter i billedet der måtte forbinde nummerpladen med bilens lygter eller andet. Vores håb er, at der er nok lodrette kanter i nummerpladeområdet til at det stadig bliver markeret på billedet der viser de vandrette gradienter. F.eks. ville en plade med to forekomster af bogstavet I og seks forekomster af tallet 1 være meget synlig på vores gradientbillede medens en nummerplade hvor begge bogstaver er et O og alle seks cifre er tallet 0 være mindre synlig på grund af det lavere antal lodrette kanter og deraf følgende lave antal vandrette gradienter.



% Input image & gradients
\begin{figure}[htbp]
  \centering
  \begin{minipage}[b]{5 cm}
    \framebox{\includegraphics[width=4cm]{illu/example_car_gray.jpg}}
  \end{minipage}
  \begin{minipage}[b]{5 cm}
    \framebox{\includegraphics[width=4cm]{system/illu/DetectContrastAvg-grads.png}}  
  \end{minipage}
  \caption{Billedet til højre viser gradienterne i billedet til venstre. Området med nummerpladen er tydeligt markeret på grund af de store kontraster i området.}
  \label{fig:DetectContrastAvg-grads}
  \end{figure}



% Horizontal gradients
\begin{figure}[htp]
  \centering
  \framebox{\includegraphics[width=10cm]{system/illu/DetectContrastAvg-hgrads.png}}
  \caption{Gradienterne fra figur \vref{fig:DetectContrastAvg-grads} med vinkler mellem 0 og 30 grader. Bemærk at de vandrette linier der er synlige over og under nummerpladen på figur \ref{fig:DetectContrastAvg-grads} ikke er synlige.}
  \label{fig:DetectContrastAvg-hgrads}  
\end{figure}

HUSK AT DER SKAL STÅ AT VI BOOSTER DE LÆNGSTE GRADIENTER


Før vi laver det binære billede med nummerpladekandidater, forsøger vi gøre nummerpladeområdet til en sammenhængende figur ved at udtvære\footnote{Eng.: Blur} billedet med et filter der giver hver pixel en intensitet svarende til middelværdien for dens nærområde. Da vi primært er interesserede i at forbinde pixels der ligger ved siden af hinanden (tegnene i nummerpladen) og ønsker at undgå at nummerpladeområdet bliver forbundet med områder der ligger tæt på dens over- og underkant, definerer vi nærområdet som et liggende rektangel. Resultatet bliver et sammenhængende område med en højde svarende til højden på tegnene i nummerpladen og en bredde der er noget længere end nummerpladens bredde. Et eksempel er vist på figur \vref{fig:DetectContrastAvg-blurredGrads}. 

% Blured horizontal gradients
\begin{figure}[htp]
  \centering
  \framebox{\includegraphics[width=10cm]{system/illu/DetectContrastAvg-blurredGrads.png}}
  \caption{De markerede områder i nummerpladen på figur \vref{fig:DetectContrastAvg-hgrads} forbindes ved at give hver pixel en intensitet der er proportional med gennemsnittet i nærområdet.}
  \label{fig:DetectContrastAvg-blurredGrads}  
\end{figure}


Som det sidste trin laver vi et binært billede med nummerpladekandidater som vist på figur \vref{fig:DetectContrastAvg-binary}. Vi bruger en forholdsvis lav grænseværdi når vi laver dette billede. Det vil sige, vi opfatter forholdsvis mørke områder som potentielle nummerpladeområder.

%Binary image
\begin{figure}[htp]
  \centering
  \framebox{\includegraphics[width=10cm]{system/illu/DetectContrastAvg-binary.png}}  
  \caption{Det binære billede med nummerpladekandidater der er afledt af billedet på figur \vref{fig:DetectContrastAvg-blurredGrads}.}
  \label{fig:DetectContrastAvg-binary}
\end{figure}

Metoden beskrevet i dette afsnit er implementeret i funktionen \textit{DetectContrastAvg} hvis kildekode findes i afsnit \vref{code:DetectContrastAvg}.



\subsubsection{Metode: Frekvensanalyse}
\label{sec_frekvensanalyse} 
Ideen bag denne metode til markering af interesseområder er, at kigge på frekvensen af skift mellem lyse og mørke intensiteter i vandrette linier i et gråtonebillede. For at kunne markere områder der har en frekvens svarende til en nummerplade, skal vi først finde ud af hvad denne representative frekvens er. Derfor har vi analyseret nummerpladeområderne på vores testbilleder og udregnet den gennemsnitlige frekvens. Med denne viden kan vi skabe et binært billede hvor de markerede interesseområder er dem hvor frekvensen ligger tæt på den udregnede idealfrekvens. (ref til pdfer med signaturer)

ILLU\_SVINGNINGER\_PLADE ILLU\_SVINGNINGER\_IKKE\_PLADE

FIGURER AF HISTOGRAMMER OG LIGN.

%\paragraph*{Analyse}
%\paragraph*{Implementation}

\subsubsection{Metode: Skru op for lokal kontrast}
Ideen bag denne metode er, at vi ved at dele billedet op i små blokke og uafhængigt af intensiteterne i resten af billedet maksimere kontrasten i disse små områder kan lave et binært billede hvor nummerpladen er et af få sammenhængende områder. Vi maksimerer kontrasten for hver blok med såkaldt \textit{Contrast streching}. Da spredningen af intensiteter i blok oftest vil være forholdsvis begrænset, kan vi øge kontrasten i området ved at strække intensiteterne så de udnytter hele spektret på 256 intensitetsværdier. På denne måde bliver de lyseste pixels i blokken helt hvide  mens de mørkeste bliver helt sorte når intensitetsværdierne blive strakt.   

Vi maksimerer kontrasten for hver blok med såkaldt \textit{Contrast streching}. Da spredningen af intensiteter i en blok oftest vil være forholdsvis begrænset, kan vi øge kontrasten i området ved at strække intensiteterne så de udnytter hele spektret på 256 intensitetsværdier. På denne måde bliver de lyseste pixels i blokken helt hvide  mens de mørkeste bliver helt sorte når intensitetsværdierne blive strakt. Figur \vref{fig:DetectCStretch-illu1} viser hvordan vi ved at strække intensiteterne deler et område med en blød overgang fra sort til hvid over i to forskellige områder der hver har intensitetsværdier i hele spektret. En nummerplade vil derimod fortsat være en sammenhængende figur efter intensiteterne er blevet strakt, da de lyseste områder, baggrunden, i nummerpladeblokkene fortsat vil støde op til de lyseste områder i de nummerpladeblokke der ligger ved siden af. Dette forhold er illustrerer på figur \vref{fig:DetectCStretch-illu2}

% Illu af contrast strech
\begin{figure}[htbp]
  \centering
  \begin{minipage}[b]{5 cm}
    \framebox{\includegraphics[width=4cm]{system/illu/DetectCStretch-illu1_1.png}}
  \end{minipage}
  \begin{minipage}[b]{5 cm}
    \framebox{\includegraphics[width=4cm]{system/illu/DetectCStretch-illu1_2.png}}  
  \end{minipage}
  \caption{Billedet til højre viser resultatet af at dele billedet til venstre op i to kvadratiske blokke og strække deres intensiteter. I hver blok bliver de mørkeste toner helt sorte, og de lyseste helt hvide når intensiteterne strækkes.}
  \label{fig:DetectCStretch-illu1}
\end{figure}

% Illu af contrast strech på plade
\begin{figure}[htbp]
  \centering
  \begin{minipage}[b]{5 cm}
    \framebox{\includegraphics[width=4cm]{system/illu/DetectCStretch-illu2_1.png}}
  \end{minipage}
  \begin{minipage}[b]{5 cm}
    \framebox{\includegraphics[width=4cm]{system/illu/DetectCStretch-illu2_2.png}}  
  \end{minipage}
  \caption{Den underbelyste nummerplade til venstre deles op i to kvadratiske blokke, og intensiteterne i dem strækkes. Resultatet til højre viser, at hele nummerpladen stadig er et sammenhængende område i modsætning til eksemplet på figur \vref{fig:DetectCStretch-illu1}.}
  \label{fig:DetectCStretch-illu2}
\end{figure}


God på meget mørke plader.


\subsubsection{Metode: Kvantifisering}
Med denne metode forsøger vi at lokalisere nummerpladen ved at sætte antallet af gråtoner i vores inddatabillede ned fra 256 til 8. Med kun 8 intensitetsværdier vil billedet indeholde større sammenhængende områder der repræsenterer de områder i originalbilledet hvor intensiteterne ligge forholdsvis tæt på hinanden. Det er vores håb at et af disse områder er nummerpladen.

Som det første trin i denne metode, kører vi et filter der giver en pixel den maksimale intensitet fra dens nærområde. Vi forventer at dette vil udviske tegnene på nummerpladen og efterlade et lyst rektangel i billedet der hvor nummerpladen findes. Formen på vores filter er et liggende rektangel da vi vil forsøge at undgå at nummerpladen forbindes med lyse områder der ligger over og under nummerpladen. Et eksempel på hvordan resultatet af at anvende dette filter er vist på figur \vref{fig:DetectQuant-filteredImage}.

% Filtered image
\begin{figure}[htp]
  \centering
  \framebox{\includegraphics[width=10cm]{system/illu/DetectQuant-filteredImage.png}}
  \caption{Resultatet af at køre et filter der giver hver pixel samme intensitet som den maksimale intensitet i nærområdet.}
  \label{fig:DetectQuant-filteredImage}  
\end{figure}

Som næste trin sætter vi antallet af intensiteter i det filtrerede billede ned fra 256 til 8. Det giver os større sammenhængende områder som vist på figur \vref{fig:DetectQuant-quantImage}. På baggrund af dette billede danner vi et binært billede der viser vores interresseområder. Et eksempel er vist på figur \vref{fig:DetectQuant-binary}.



% Quant image
\begin{figure}[htp]
  \centering
  \framebox{\includegraphics[width=10cm]{system/illu/DetectQuant-quantImage.png}}
  \caption{Resultatet af at sætte antallet af intensitetet i billedet på figur \vref{fig:DetectQuant-filteredImage} ned til otte.}
  \label{fig:DetectQuant-quantImage}  
\end{figure}

% Quant binary image
\begin{figure}[htp]
  \centering
  \framebox{\includegraphics[width=10cm]{system/illu/DetectQuant-binary.png}}
  \caption{Interesseområde valgt på baggrund af billedet på figur \vref{fig:DetectQuant-quantImage}}
  \label{fig:DetectQuant-binary}  
\end{figure}

HVOR SKAL VI SKRIVE AT METODEN ER DÅRLIG PÅ HVIDE BILER

Metoden beskrevet i dette afsnit er implementeret i funktionen \textit{DetectQuant} hvis kildekode findes i afsnit \vref{code:DetectQuant}.




\subsubsection{Analyse af kandidater}
\label{sec:kandidater}
Ud fra de binære billeder der viser interesseområder, skal vi forsøget at finde de områder der mest sandsynligt er nummerplader. (noget med sammenhængende områder og dilate/erode). Vi begynder udvælgelsesprocessen med at frasortere de områdervi mener kan udelukkes som værende nummerplader. Vi sletter områder med følgende karateristika:
\begin{itemize}
\item Området er meget lille.
\item Området er meget stort.
\item Området er højere end det er bredt.
\item Området er for bredt i forhold til højden\footnote{I forhold til højde/bredde forholdet for en nummerplade}.
\item Området har få markerede pixels i forhold til det rektangel det udspænder.
\end{itemize}


I det resulterende binære billede giver vi de tilbageværende områder point efter deres højde/bredde forhold og deres frekvens. Et område der udspænder et rektangel med samme højde/bredde-forhold som en nummerplade får 0 point og et område der afviger meget fra det ideelle højde/bredde-forhold får et højt antal point.

Herefter kigger vi på en værdi der beskriver antallet af skift mellem meget lyse og meget mørke områder i kandidatområdet. Princippet er det samme som metoden beskrevet afsnittet \textbf{Frekvensanalyse} på side \pageref{sec_frekvensanalyse}. Forskellen er, at vi i det fåregående afsnit kiggede på linier der er indeholdt i nummerplader, mens vi her kigger på et helt områder der er større end selve nummerpladen. Der er en væsentlig forskel, da starten og slutningen på en nummerplade er meget karakteristisk. Udfra vores testdata har vi udregnet en gennemsnitsværdi for svingninger i nummerpladeområder. Vi sammenligner kandidaterne og giver dem point i forhold til hvor tæt de ligger på den på forhånd bestemte gennemsnitsværdi. Jo mere et område afviger fra det ideelle antal svingninger, jo flere point får det.

ILLU\_PLATESIG\_M\_AVG



%Signatur: avg plateness ganges op da plate sig ser ud som den gør.
ILLU MED TRIN I FRAVÆLGELSE AF KANDIDATER
%\paragraph*{Analyse}
%Ville være hurtigere at ikke slette men at fravælge. Størrelser. Må man det? Generelt vs. ikke generelt.


%\paragraph*{Analyse}
%Ville være hurtigere at ikke slette men at fravælge. Størrelser. Må man det? Generelt vs. ikke generelt.

%\paragraph*{Implementation}


%detect4
\subsubsection{Endeligt valg af nummerpladekandidat på baggrund af alle metoder.}
Beskriv hvordan vi sammenholder de forskellige metoders resultat.

\subsubsection{Metoder fra litteraturen}
\cite{parker} bruger kant-detektion og lokalisering af tegn til at give et bud på hvor nummerpladen er.

Identificering af nummerpladen i billedet kan gøres ved blot at søge efter hvide områder i billedet \cite{ron}, \cite{nijhuis}, eller udfra viden om kanter i billedet \cite{shapiro} og eventuelt kombinere det med teksturanalyse \cite{parker}. Derudover kan man analysere kontrasterne i billedet \cite{kwas}, da en nummerplade må forventes af bestå af kontrastfyldte (sort/hvide) områder. Rotation af nummerpladen kan gøres ved brug af Radon transformation, som kan afgøre hvor der findes linier i billedet, samt hvilken vinkel disse linier har \cite{ron}, \cite{shapiro}. 

\subsubsection*{MSER}
Først sorteres alle pixels intensiteter (stigende). Dette gøres ved brug af bucket sort.

%%%%%%%%%%%%
% COMMENTS %
%%%%%%%%%%%%

\begin{comment}
\subsubsection{Tobias' brainstorm}
Kan man kigge på højde bredde på components?
Scan linie. Man kan både kigge på components og "signatur" som beskrevet andetsteds(pdf).
Med gradienter kan man finde f.eks. lodrette men ikke vandrette streger. Der er mange lodrette i pladen.
Man kan kigge på en f.eks. 8x8 og se hvor mange komponenter der er tilstede. Der er mange komponenter i et 
lille område i nummerpladen(eller hvad?).

Kør en scanlinie. Noter kraftige gradienter. Hvis de er "tæt" på hinanden er det godt. giv "point"

Det her dropper jeg  indtil videre:
Kør en vertikal scanlinie. Hvis vi møder en gradient begynder vi at "tegne" en streg hvis intensitet 
falder. Den tegner altså en savtak når den møder en gradient. Hvis der er flere høje gradienter i træk får 
vi så en kasse med en skrå afslutning. Er det ikke en nummerplade? 


Nu gør jeg:
Find gradienter i billedet. Lav et binært billede hvor de steder hvor gradienten er større end (0.5 * den 
maximale gradient) er markeret med hvidt.

Der er nu mange markeringer i nummerpladeområdet.

Jeg tænker. Samme princip som med kun at vise maksimale gradienter:
Kig på summen (mængden af hvidt) af alle vandrette linier i billedet. "slet" de linier hvor der er mindre 
end (0.5 * summen af den linie med mest hvidt). Jeg burde nu have fjernet støj men stadig have pladen. Jeg 
statser på at pladen er på de linier med mest hvidt.

\end{comment}

\begin{comment}
Diskuter om vi skal vælge en kandidat når de forskellige metoder har forskellige kandidater. Parkering: man kunne bede bilen om at bakke og tage et nyt billeder hvis der ikke kan findes en fælles kandidat. Fartkontrol: ikke muligt med nyt billede, gær derimod på den kandidat der er returneret af den mest pålidelige metode. 

Regler:

- Kant efterfulgt af rød stribe (ovenover eller nedenunder)
- Pixel del af sammenhængende kæde som er længere end et vist antal pixels
- En linie hvorpå der er en anden retvinklet linie, og linierne har et vist forhold
- Længde af linie

\end{comment}

\begin{comment}
\subsubsection{Metode: Histogram}
\label{sec_histo}

SKAL DENNE METODE BESKRIVES?

Idéen i denne metode er at hver pixel i et fotografi stilles op mod en frekvenstabel, indeholdende farvefrekvenser for en mængde nummerplader. Hvis pixelens farve svarer til en farve med høj frekvens i denne tabel, er det sandsynligt at den er en del af en nummerplade.

%Beskrevet i LicensePlateSydney.pdf

%Frekvenstabel, hvordan opbygges den?
%Frekvenstabellen indeholdende farvefrekvenserne for pixels i en række billeder af nummerplader blev lavet som følgende: Tabellen blev udformet vha. funktionen make\_freq\_table. I funktionen itereres der gennem alle pixels i et billede og deres RGB værdier noteres i en 255 x 255 x 255 matrice. Eksempelvis

Først oprettes en frekvenstabel udfra nogle billeder, hvor nummerpladens placering i billedet allerede er specificeret. Her itereres der gennem alle pixels i et billede og antallet af farver med en bestemt farvekombination summeres i en $255 \times 255 \times 255$ matrice, med plads til én frekvensværdi, $f$ for hver farvekombination. Når frekvenstabellen er udformet, normaliseres den. Det medfører at den RGB værdi der har den højeste frekvens, $f_{max}$ får værdien 1, mens de resterende RGB værdier får værdien $f$/$f_{max}$. Hvis RGB værdien 240, 240, 230 eksempelvis har den højeste frekvens, 55 og RGB værdien 230, 230, 220 har frekvensen $35$, får førstnævnte værdien 1 og sidstnævnte værdien $35/55 = 0,64$.


I systemet udarbejdede vi to frekvenstabeller. Én for billederne taget med et Canon digitalkamera og én for billederne taget med et Olympus digitalkamera. Grunden til at oprette disse to adskilte tabeller er, at vi får mulighed for at undersøge forskellen på brug af kamera. Eksempelvis kan det undersøges om en frekvenstabel lavet udfra billeder fra ét kamera kan bruges til at identificere nummerplader i billeder fra et andet kamera.


%Vi udvalgte tilfældigt hhv. 70 og 50 billeder fra de to grupper til de to frekvenstabeller og gemte disse tabeller i to seperate filer. Systemet kunne herefter bruge disse frekvenstabeller uden at skulle skabe dem først.

Ved hjælp af frekvenstabellerne skabes et billede hvor hver pixel gives en værdi fra 0 til 1 afhængig af om pixelens farve fremkommer sjældent (0) eller hyppigt (1) i en nummerplade. Disse værdier svarer altså til de værdier der står i frekvenstabellerne. I eksemplet ovenfor, ville en pixel med RGB værdien 230, 230, 220 få værdien 0,64 i tilhørsbilledet. Dette tilhørsbillede vil, med værdier fra 0 til 1, være et gråtone billede hvor de pixels, der har samme farve som de farver der oftest optræder i billeder af nummerplader, vil blive lyse og omvendt vil de resterende pixels blive mørke. De pixels der har de højeste frekvenser bliver altså interesseområder.

TO ILLUSTRATIONER: ORIGINAL BILLEDE OG TILHØRSBILLEDE
%\paragraph{Analyse}
%\paragraph{Implementation}
%Omdannes dette billede til et binært billede vil vi (ved succes) få forbundne komponenter bl.a. der hvor nummerpladen befinder sig i billedet. Disse komponenters størrelse, form osv. kan herefter analyseres og man kan give et bud på hvor nummerpladen befinder sig.
\end{comment}

